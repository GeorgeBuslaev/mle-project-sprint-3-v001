# Вебинар "Цикл разработки и деплоя приложений на примере микросервиса"
## Курс "Инженер машинного обучения", Яндекс Практикум

#### Описание проекта
Микросервис для предсказания погоды, основанный на модели градиентного бустинга. Сервис оценивает вероятность дождя на следующий день по текущим погодным условиям.
**Бизнес-задача:** вывести модель в продакшен и соблюсти следующие условия:

У коллег должна быть возможность получать предсказания модели онлайн. Сервис с моделью должен быть устроен гибко — так, чтобы его можно было разворачивать на разных виртуальных машинах, где уже работают другие сервисы нашей компании. Необходимо предусмотреть мониторинг работы сервиса, чтобы своевременно узнавать о потенциальных рисках.

**Задача инженера машинного обучения**
Выставленные требования подсказывают, какие шаги нужно предпринять: Разработать FastAPI-микросервис. Контейнеризовать его с помощью Docker. Развернуть систему мониторинга, используя Prometheus и Grafana. Разработать дашборд для мониторинга в Grafana.


#### Как работать с проектом?

##### 1. Скачивание и установка зависимостей
1. Чтобы редактировать репозиторий, необходимо сделать его копию. Это делается по кнопке fork.

2. Клонируем репозиторий на свой компьютер:
~~~
git clone <адрес вашей копии репозитория>
~~~

3. Создаём новую ветку:
~~~
git checkout -b <имя новой ветки>
~~~

4. Запуск FastAPI микросервиса в виртуальном окружение

```
python3 -m venv ./.venv
source .venv/bin/activate
cd services/
python -m pip install -r requirements.txt
cd app
uvicorn real_estate_app:app --reload
```


5. Запуск FastAPI микросервиса в Docker-контейнере
'''
docker pull python:3.11-slim 
docker image build . -f ./Dockerfile_ml_service --tag real_estate_price_predict:0
docker container run --publish 4601:8081 --volume=./models:/app/models   --env-file .env real_estate_price_predict:latest
'''

6. Запуск FastAPI микросервиса с использованием Docker Compose
'''
cd services/app
docker pull python:3.11-slim
docker compose up  --build
'''

5. Готово! Можно проверить работоспособность проекта, запустив тесты:
~~~
./test_script_1.sh
~~~

Запустить 10 запросов через каждые 5 секунд:
~~~
source .venv/bin/activate
python test_script_10.py
~~~